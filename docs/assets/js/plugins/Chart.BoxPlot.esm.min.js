import{defaults as defaults$3,Element,canvasHelpers,elements,helpers as helpers$2,controllers,scaleService,LinearScaleBase,Tooltip}from"chart.js";function ownKeys(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)),i}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,o,a=[],n=!0,l=!1;try{for(r=r.call(t);!(n=(i=r.next()).done)&&(a.push(i.value),!e||a.length!==e);n=!0);}catch(t){l=!0,o=t}finally{try{n||null==r.return||r.return()}finally{if(l)throw o}}return a}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gaussian(t){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*t*t)}function mean(t){var e=t.length;if(0===e)return NaN;for(var r=0,i=-1;++i<e;)r+=(t[i]-r)/(i+1);return r}function variance(t){var e=t.length;if(e<1)return NaN;if(1===e)return 0;for(var r=mean(t),i=-1,o=0;++i<e;){var a=t[i]-r;o+=a*a}return o/(e-1)}function ascending(t,e){return t-e}function quantiles(i,t){var o=(i=i.slice().sort(ascending)).length-1;return t.map(function(t){if(0===t)return i[0];if(1===t)return i[o];var e=1+t*o,r=Math.floor(e),t=e-r,e=i[r-1];return 0==t?e:e+t*(i[r]-e)})}function iqr(t){t=quantiles(t,[.25,.75]);return t[1]-t[0]}function nrd(t){var e=iqr(t)/1.34;return 1.06*Math.min(Math.sqrt(variance(t)),e)*Math.pow(t.length,-.2)}function functor(t){return"function"==typeof t?t:function(){return t}}function kde(){var a=gaussian,n=[],r=nrd;function e(t,e){var o=r.call(this,n);return t.map(function(t){for(var e=-1,r=0,i=n.length;++e<i;)r+=a((t-n[e])/o);return[t,r/o/i]})}return e.kernel=function(t){return arguments.length?(a=t,e):a},e.sample=function(t){return arguments.length?(n=t,e):n},e.bandwidth=function(t){return arguments.length?(r=functor(t),e):r},e}function quantilesType7(i){function t(t){var e=1+t*o,r=Math.floor(e),t=e-r,e=i[r-1];return 0==t?e:e+t*(i[r]-e)}var o=i.length-1;return{min:i[0],q1:t(.25),median:t(.5),q3:t(.75),max:i[o]}}function fivenum(e){function t(t){return.5*(e[Math.floor(t)-1]+e[Math.ceil(t)-1])}var r=e.length,i=Math.floor((r+3)/2)/2;return{min:e[0],q1:t(i),median:t((r+1)/2),q3:t(r+1-i),max:e[r-1]}}function whiskers(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1.5,i=t.q3-t.q1,o="number"==typeof r&&0<r,a=o?Math.max(t.min,t.q1-r*i):t.min,n=o?Math.min(t.max,t.q3+r*i):t.max;if(Array.isArray(e)){for(var l=0;l<e.length;l++){var s=e[l];if(a<=s){a=s;break}}for(var u=e.length-1;0<=u;u--){var c=e[u];if(c<=n){n=c;break}}}return{whiskerMin:a,whiskerMax:n}}var defaultStatsOptions={coef:1.5,quantiles:7};function determineStatsOptions(t){var e=(null==t||"number"!=typeof t.coef?defaultStatsOptions:t).coef,t=null==t?null:t.quantiles;return{coef:e,quantiles:"function"==typeof t?t:"hinges"===t||"fivenum"===t?fivenum:quantilesType7}}function boxplotStats(t,e){if(0===t.length)return{min:NaN,max:NaN,median:NaN,q1:NaN,q3:NaN,whiskerMin:NaN,whiskerMax:NaN,outliers:[]};(t=t.filter(function(t){return"number"==typeof t&&!isNaN(t)})).sort(function(t,e){return t-e});var r=determineStatsOptions(e),e=r.quantiles,r=r.coef,e=e(t),r=whiskers(e,t,r),i=r.whiskerMin,o=r.whiskerMax;return e.outliers=t.filter(function(t){return t<i||o<t}),e.whiskerMin=i,e.whiskerMax=o,e}function violinStats(t,e){if(0===t.length)return{};(t=t.filter(function(t){return"number"==typeof t&&!isNaN(t)})).sort(function(t,e){return t-e});e=(0,determineStatsOptions(e).quantiles)(t);return e.kde=kde().sample(t),e}function asBoxPlotStats(t,e){return t?"number"==typeof t.median&&"number"==typeof t.q1&&"number"==typeof t.q3?(void 0===t.whiskerMin&&(r=determineStatsOptions(e).coef,r=(i=whiskers(t,Array.isArray(t.items)?t.items.slice().sort(function(t,e){return t-e}):null,r)).whiskerMin,i=i.whiskerMax,t.whiskerMin=r,t.whiskerMax=i),t):Array.isArray(t)?(void 0===t.__stats&&(t.__stats=boxplotStats(t,e)),t.__stats):void 0:null;var r,i}function asViolinStats(t,e){return t?"number"!=typeof t.median||"function"!=typeof t.kde&&!Array.isArray(t.coords)?Array.isArray(t)?(void 0===t.__kde&&(t.__kde=violinStats(t,e)),t.__kde):void 0:t:null}function asValueStats(t,e,r,i){return"number"==typeof t[e]&&"number"==typeof t[r]?t:Array.isArray(t)&&0!==t.length?asBoxPlotStats(t,i):void 0}function getRightValue(t,e){if(!t)return t;if("number"==typeof t||"string"==typeof t)return Number(t);e=asBoxPlotStats(t,e);return e?e.median:t}var commonScaleOptions={ticks:_objectSpread2({minStats:"min",maxStats:"max"},defaultStatsOptions)};function commonDataLimits(a){var n=this,r=this.chart,i=this.isHorizontal(),t=this.options.ticks,l=t.minStats,s=t.maxStats;this.min=null,this.max=null,r.data.datasets.forEach(function(t,e){var o=r.getDatasetMeta(e);r.isDatasetVisible(e)&&(e=o,i?e.xAxisID===n.id:e.yAxisID===n.id)&&t.data.forEach(function(t,e){if(null!=t&&!o.data[e].hidden){var r,i,e=asValueStats(t,l,s,n.options.ticks);if(e)r=e[l],i=e[s];else{t=+n.getRightValue(t);if(isNaN(t))return;r=i=t}(null===n.min||r<n.min)&&(n.min=r),(null===n.max||i>n.max)&&(n.max=i),a&&a(e)}})})}function rnd(t){return void 0===t&&(t=Date.now()),function(){return(t=(9301*t+49297)%233280)/233280}}var defaults=_objectSpread2(_objectSpread2({},defaults$3.global.elements.rectangle),{},{borderWidth:1,outlierRadius:2,outlierColor:defaults$3.global.elements.rectangle.backgroundColor,lowerColor:defaults$3.global.elements.rectangle.lowerColor,medianColor:null,itemRadius:0,itemStyle:"circle",itemBackgroundColor:defaults$3.global.elements.rectangle.backgroundColor,itemBorderColor:defaults$3.global.elements.rectangle.borderColor,hitPadding:2,outlierHitRadius:4,tooltipDecimals:2}),ArrayElementBase=Element.extend({isVertical:function(){return void 0!==this._view.width},draw:function(){},_drawItems:function(e,t,r,i){var o;e.itemRadius<=0||!t.items||t.items.length<=0||(r.save(),r.strokeStyle=e.itemBorderColor,r.fillStyle=e.itemBackgroundColor,o=rnd(1e3*this._datasetIndex+this._index),i?t.items.forEach(function(t){canvasHelpers.drawPoint(r,e.itemStyle,e.itemRadius,e.x-e.width/2+o()*e.width,t)}):t.items.forEach(function(t){canvasHelpers.drawPoint(r,e.itemStyle,e.itemRadius,t,e.y-e.height/2+o()*e.height)}),r.restore())},_drawOutliers:function(e,t,r,i){e.outlierRadius<=0||!t.outliers||0===t.outliers.length||(r.fillStyle=e.outlierColor,r.beginPath(),i?t.outliers.forEach(function(t){r.arc(e.x,t,e.outlierRadius,0,2*Math.PI)}):t.outliers.forEach(function(t){r.arc(t,e.y,e.outlierRadius,0,2*Math.PI)}),r.fill(),r.closePath())},_getBounds:function(){return{left:0,top:0,right:0,bottom:0}},_getHitBounds:function(){var t=this._view.hitPadding,e=this._getBounds();return{left:e.left-t,top:e.top-t,right:e.right+t,bottom:e.bottom+t}},height:function(){return 0},inRange:function(t,e){return!!this._view&&(this._boxInRange(t,e)||0<=this._outlierIndexInRange(t,e))},inLabelRange:function(t,e){if(!this._view)return!1;var r=this._getHitBounds();return this.isVertical()?t>=r.left&&t<=r.right:e>=r.top&&e<=r.bottom},inXRange:function(t){var e=this._getHitBounds();return t>=e.left&&t<=e.right},inYRange:function(t){var e=this._getHitBounds();return t>=e.top&&t<=e.bottom},_outlierIndexInRange:function(t,e){var r=this._view,i=r.outlierHitRadius,o=this._getOutliers(),a=this.isVertical();if(a&&Math.abs(t-r.x)>i||!a&&Math.abs(e-r.y)>i)return-1;for(var n=a?e:t,l=0;l<o.length;l++)if(Math.abs(o[l]-n)<=i)return l;return-1},_boxInRange:function(t,e){var r=this._getHitBounds();return t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return 0},_getOutliers:function(){return[]},tooltipPosition:function(t,e){if(!t)return this.getCenterPoint();delete e._tooltipOutlier;var r=this._view,t=this._outlierIndexInRange(t.x,t.y);return t<0?this.getCenterPoint():(e._tooltipOutlier=t,this.isVertical()?{x:r.x,y:this._getOutliers()[t]}:{x:this._getOutliers()[t],y:r.y})}});function transitionBoxPlot(t,e,r,i){for(var o=0,a=Object.keys(r);o<a.length;o++){var n=a[o],l=r[n],s=t[n];if(s!==l)if("number"!=typeof l){if(Array.isArray(l))for(var u=e[n],c=Math.min(l.length,s.length),h=0;h<c;++h)u[h]=s[h]+(l[h]-s[h])*i}else e[n]=s+(l-s)*i}}defaults$3.global.elements.boxandwhiskers=_objectSpread2({},defaults);var BoxAndWiskers=elements.BoxAndWhiskers=ArrayElementBase.extend({transition:function(t){var e=Element.prototype.transition.call(this,t),r=this._model,i=this._start,o=this._view;return r&&1!==t&&(null==i.boxplot||(r.boxplot===o.boxplot&&(o.boxplot=helpers$2.clone(o.boxplot)),transitionBoxPlot(i.boxplot,o.boxplot,r.boxplot,t))),e},draw:function(){var t=this._chart.ctx,e=this._view,r=e.boxplot,i=this.isVertical();t.save(),t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,this._drawBoxPlot(e,r,t,i),this._drawOutliers(e,r,t,i),t.restore(),this._drawItems(e,r,t,i)},_drawBoxPlot:function(t,e,r,i){i?this._drawBoxPlotVert(t,e,r):this._drawBoxPlotHoriz(t,e,r)},_drawBoxPlotVert:function(t,e,r){var i=t.x,o=t.width,a=i-o/2;e.q3>e.q1?r.fillRect(a,e.q1,o,e.q3-e.q1):r.fillRect(a,e.q3,o,e.q1-e.q3),r.save(),t.medianColor&&(r.strokeStyle=t.medianColor),r.beginPath(),r.moveTo(a,e.median),r.lineTo(a+o,e.median),r.closePath(),r.stroke(),null!=e.segment&&(t.segmentColor&&(r.strokeStyle=t.segmentColor),r.beginPath(),r.moveTo(a,e.segment),r.lineTo(a+o,e.segment),r.closePath()),t.lowerColor&&(r.fillStyle=t.lowerColor,e.q3>e.q1?r.fillRect(a,e.median,o,e.q3-e.median):r.fillRect(a,e.median,o,e.q1-e.median)),r.closePath(),r.stroke(),r.restore(),e.q3>e.q1?r.strokeRect(a,e.q1,o,e.q3-e.q1):r.strokeRect(a,e.q3,o,e.q1-e.q3),r.beginPath(),r.moveTo(a,e.whiskerMin),r.lineTo(a+o,e.whiskerMin),r.moveTo(i,e.whiskerMin),r.lineTo(i,e.q1),r.moveTo(a,e.whiskerMax),r.lineTo(a+o,e.whiskerMax),r.moveTo(i,e.whiskerMax),r.lineTo(i,e.q3),r.closePath(),r.stroke()},_drawBoxPlotHoriz:function(t,e,r){var i=t.y,o=t.height,a=i-o/2;e.q3>e.q1?r.fillRect(e.q1,a,e.q3-e.q1,o):r.fillRect(e.q3,a,e.q1-e.q3,o),r.save(),t.medianColor&&(r.strokeStyle=t.medianColor),r.beginPath(),r.moveTo(e.median,a),r.lineTo(e.median,a+o),r.closePath(),r.stroke(),r.restore(),e.q3>e.q1?r.strokeRect(e.q1,a,e.q3-e.q1,o):r.strokeRect(e.q3,a,e.q1-e.q3,o),r.beginPath(),r.moveTo(e.whiskerMin,a),r.lineTo(e.whiskerMin,a+o),r.moveTo(e.whiskerMin,i),r.lineTo(e.q1,i),r.moveTo(e.whiskerMax,a),r.lineTo(e.whiskerMax,a+o),r.moveTo(e.whiskerMax,i),r.lineTo(e.q3,i),r.closePath(),r.stroke()},_getBounds:function(){var t=this._view,e=this.isVertical(),r=t.boxplot;if(!r)return{left:0,top:0,right:0,bottom:0};if(e){var e=t.x,i=t.width,e=e-i/2;return{left:e,top:r.whiskerMax,right:e+i,bottom:r.whiskerMin}}i=t.y,t=t.height,i-=t/2;return{left:r.whiskerMin,top:i,right:r.whiskerMax,bottom:i+t}},height:function(){var t=this._view;return t.base-Math.min(t.boxplot.q1,t.boxplot.q3)},getArea:function(){var t=this._view,e=Math.abs(t.boxplot.q3-t.boxplot.q1);return this.isVertical()?e*t.width:e*t.height},_getOutliers:function(){return this._view.boxplot&&this._view.boxplot.outliers||[]}});function transitionViolin(t,e,r,i){for(var o=0,a=Object.keys(r);o<a.length;o++){var n=a[o],l=r[n],s=t[n];if(s!==l)if("number"!=typeof l){if("coords"===n)for(var u=e[n],c=Math.min(l.length,s.length),h=0;h<c;++h)u[h].v=s[h].v+(l[h].v-s[h].v)*i,u[h].estimate=s[h].estimate+(l[h].estimate-s[h].estimate)*i}else e[n]=s+(l-s)*i}}defaults$3.global.elements.violin=_objectSpread2({points:100},defaults);var Violin=elements.Violin=ArrayElementBase.extend({transition:function(t){var e=Element.prototype.transition.call(this,t),r=this._model,i=this._start,o=this._view;return r&&1!==t&&(null==i.violin||(r.violin===o.violin&&(o.violin=helpers$2.clone(o.violin)),transitionViolin(i.violin,o.violin,r.violin,t))),e},draw:function(){var r=this._chart.ctx,t=this._view,e=t.violin,i=this.isVertical();r.save(),r.fillStyle=t.backgroundColor,r.strokeStyle=t.borderColor,r.lineWidth=t.borderWidth;var o,a,n,l,s=e.coords;canvasHelpers.drawPoint(r,"rectRot",5,t.x,t.y),r.stroke(),r.beginPath(),i?(o=t.x,a=t.width/2/e.maxEstimate,r.moveTo(o,e.min),s.forEach(function(t){var e=t.v,t=t.estimate;r.lineTo(o-t*a,e)}),r.lineTo(o,e.max),r.moveTo(o,e.min),s.forEach(function(t){var e=t.v,t=t.estimate;r.lineTo(o+t*a,e)}),r.lineTo(o,e.max)):(n=t.y,l=t.height/2/e.maxEstimate,r.moveTo(e.min,n),s.forEach(function(t){var e=t.v,t=t.estimate;r.lineTo(e,n-t*l)}),r.lineTo(e.max,n),r.moveTo(e.min,n),s.forEach(function(t){var e=t.v,t=t.estimate;r.lineTo(e,n+t*l)}),r.lineTo(e.max,n)),r.stroke(),r.fill(),r.closePath(),this._drawOutliers(t,e,r,i),r.restore(),this._drawItems(t,e,r,i)},_getBounds:function(){var t=this._view,e=this.isVertical(),r=t.violin;if(e){var e=t.x,i=t.width,e=e-i/2;return{left:e,top:r.max,right:e+i,bottom:r.min}}i=t.y,t=t.height,i-=t/2;return{left:r.min,top:i,right:r.max,bottom:i+t}},height:function(){var t=this._view;return t.base-Math.min(t.violin.min,t.violin.max)},getArea:function(){var t=this._view,e=Math.abs(t.violin.max-t.violin.min);return this.isVertical()?e*t.width:e*t.height},_getOutliers:function(){return this._view.violin.outliers||[]}}),verticalDefaults={scales:{yAxes:[{type:"arrayLinear"}]}},horizontalDefaults={scales:{xAxes:[{type:"arrayLinear"}]}};function toFixed(t){var e=this._chart.config.options.tooltipDecimals;return null==e||"number"!=typeof e||e<0?t:Number.parseFloat(t).toFixed(e)}var configKeys=["outlierRadius","itemRadius","itemStyle","itemBackgroundColor","itemBorderColor","outlierColor","medianColor","segmentColor","hitPadding","outlierHitRadius","lowerColor"],configKeyIsColor=[!1,!1,!1,!0,!0,!0,!0,!0,!1,!1,!0],array={_elementOptions:function(){return{}},updateElement:function(e,r,t){var i=this.getDataset(),o=e.custom||{},a=this._elementOptions();controllers.bar.prototype.updateElement.call(this,e,r,t);var n=helpers$2.options.resolve,l={chart:this.chart,dataIndex:r,dataset:i,datasetIndex:this.index};configKeys.forEach(function(t){e._model[t]=n([o[t],i[t],a[t]],l,r)})},_calculateCommonModel:function(t,e,r,i){r.outliers&&(t.outliers=r.outliers.map(function(t){return i.getPixelForValue(Number(t))})),Array.isArray(e)?t.items=e.map(function(t){return i.getPixelForValue(Number(t))}):r.items&&(t.items=r.items.map(function(t){return i.getPixelForValue(Number(t))}))},setHoverStyle:function(i){controllers.bar.prototype.setHoverStyle.call(this,i);var o=this.chart.data.datasets[i._datasetIndex],a=i._index,n=i.custom||{},l=i._model,s=helpers$2.getHoverColor,u=helpers$2.options.resolve;configKeys.forEach(function(t,e){i.$previousStyle[t]=l[t];var r="hover".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),e=configKeyIsColor[e]&&null!=l[t]?s(l[t]):l[t];i._model[t]=u([n[r],o[r],e],void 0,a)})}};function boxplotTooltip(t,e){for(var r=asBoxPlotStats(e.datasets[t.datasetIndex].data[t.index],this._chart.getDatasetMeta(t.datasetIndex).controller._getValueScale().options.ticks),i=null==this._tooltipOutlier?-1:this._tooltipOutlier,o=this._options.callbacks.boxplotLabel,a=arguments.length,n=new Array(2<a?a-2:0),l=2;l<a;l++)n[l-2]=arguments[l];return o.apply(this,[t,e,r,i].concat(n))}var defaults$1={tooltips:{position:"boxplot",callbacks:{label:boxplotTooltip,boxplotLabel:function(t,e,r,i){e=e.datasets[t.datasetIndex].label||"",t="".concat(e," ").concat("string"==typeof t.xLabel?t.xLabel:t.yLabel);if(!r)return"".concat(t," (NaN)");if(0<=i){i=r.outliers[i];return"".concat(t," (outlier: ").concat(toFixed.call(this,i),")")}return"".concat(t," (min: ").concat(toFixed.call(this,r.min),", q1: ").concat(toFixed.call(this,r.q1),", median: ").concat(toFixed.call(this,r.median),", q3: ").concat(toFixed.call(this,r.q3),", max: ").concat(toFixed.call(this,r.max),")")}}}};defaults$3.boxplot=helpers$2.merge({},[defaults$3.bar,verticalDefaults,defaults$1]),defaults$3.horizontalBoxplot=helpers$2.merge({},[defaults$3.horizontalBar,horizontalDefaults,defaults$1]),defaults$3.global.datasets&&defaults$3.global.datasets.bar&&(defaults$3.global.datasets.boxplot=_objectSpread2({},defaults$3.global.datasets.bar)),defaults$3.global.datasets&&defaults$3.global.datasets.horizontalBar&&(defaults$3.global.datasets.horizontalBoxplot=_objectSpread2({},defaults$3.global.datasets.horizontalBar));var boxplot=_objectSpread2(_objectSpread2({},array),{},{dataElementType:elements.BoxAndWhiskers,_elementOptions:function(){return this.chart.options.elements.boxandwhiskers},_updateElementGeometry:function(t,e,r){for(var i,o=arguments.length,a=new Array(3<o?o-3:0),n=3;n<o;n++)a[n-3]=arguments[n];(i=controllers.bar.prototype._updateElementGeometry).call.apply(i,[this,t,e,r].concat(a)),t._model.boxplot=this._calculateBoxPlotValuesPixels(this.index,e)},_calculateBoxPlotValuesPixels:function(t,e){var r=this._getValueScale(),e=this.chart.data.datasets[t].data[e];if(!e)return null;var i=asBoxPlotStats(e,r.options.ticks),o={};return Object.keys(i).forEach(function(t){"outliers"!==t&&"items"!==t&&(o[t]=r.getPixelForValue(Number(i[t])))}),this._calculateCommonModel(o,e,i,r),o}}),BoxPlot=controllers.boxplot=controllers.bar.extend(boxplot),HorizontalBoxPlot=controllers.horizontalBoxplot=controllers.horizontalBar.extend(boxplot);function violinTooltip(t,e){for(var r=asViolinStats(e.datasets[t.datasetIndex].data[t.index],this._chart.getDatasetMeta(t.datasetIndex).controller._getValueScale().options.ticks),i=this._options.callbacks.violinLabel,o=arguments.length,a=new Array(2<o?o-2:0),n=2;n<o;n++)a[n-2]=arguments[n];return i.apply(this,[t,e,r].concat(a))}var defaults$2={tooltips:{callbacks:{label:violinTooltip,violinLabel:function(t,e){var r=e.datasets[t.datasetIndex].label||"",e=t.value,t="".concat(r," ").concat("string"==typeof t.xLabel?t.xLabel:t.yLabel);return"".concat(t," (").concat(toFixed.call(this,e),")")}}}};defaults$3.violin=helpers$2.merge({},[defaults$3.bar,verticalDefaults,defaults$2]),defaults$3.horizontalViolin=helpers$2.merge({},[defaults$3.horizontalBar,horizontalDefaults,defaults$2]),defaults$3.global.datasets&&defaults$3.global.datasets.bar&&(defaults$3.global.datasets.violin=_objectSpread2({},defaults$3.global.datasets.bar)),defaults$3.global.datasets&&defaults$3.global.datasets.horizontalBar&&(defaults$3.global.datasets.horizontalViolin=_objectSpread2({},defaults$3.global.datasets.horizontalBar));var controller=_objectSpread2(_objectSpread2({},array),{},{dataElementType:elements.Violin,_elementOptions:function(){return this.chart.options.elements.violin},_updateElementGeometry:function(t,e,r){for(var i=arguments.length,o=new Array(3<i?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(l=controllers.bar.prototype._updateElementGeometry).call.apply(l,[this,t,e,r].concat(o));var n=t.custom||{},l=this._elementOptions();t._model.violin=this._calculateViolinValuesPixels(this.index,e,(void 0!==n.points?n:l).points)},_calculateViolinValuesPixels:function(t,e,r){var i=this._getValueScale(),e=this.chart.data.datasets[t].data[e],o=asViolinStats(e,i.options.ticks);if(!Array.isArray(e)&&"number"==typeof e&&!Number.isNaN||null==o)return{min:e,max:e,median:e,coords:[{v:e,estimate:Number.NEGATIVE_INFINITY}],maxEstimate:Number.NEGATIVE_INFINITY};for(var a=[],n=(o.max-o.min)/r,l=o.min;l<=o.max&&0<n;l+=n)a.push(l);a[a.length-1]!==o.max&&a.push(o.max);r=o.coords||o.kde(a).map(function(t){return{v:t[0],estimate:t[1]}}),r={min:i.getPixelForValue(o.min),max:i.getPixelForValue(o.max),median:i.getPixelForValue(o.median),coords:r.map(function(t){var e=t.v,t=t.estimate;return{v:i.getPixelForValue(e),estimate:t}}),maxEstimate:r.reduce(function(t,e){return Math.max(t,e.estimate)},Number.NEGATIVE_INFINITY)};return this._calculateCommonModel(r,e,o,i),r}}),Violin$1=controllers.violin=controllers.bar.extend(controller),HorizontalViolin=controllers.horizontalViolin=controllers.horizontalBar.extend(controller),helpers=helpers$2,ArrayLinearScaleOptions=helpers$2.merge({},[commonScaleOptions,scaleService.getScaleDefaults("linear")]),ArrayLinearScale=scaleService.getScaleConstructor("linear").extend({getRightValue:function(t){return LinearScaleBase.prototype.getRightValue.call(this,getRightValue(t,this.options.ticks))},_parseValue:function(t){return LinearScaleBase.prototype._parseValue.call(this,getRightValue(t,this.options.ticks))},determineDataLimits:function(){commonDataLimits.call(this),this.handleTickRangeOptions()}});scaleService.registerScaleType("arrayLinear",ArrayLinearScale,ArrayLinearScaleOptions);var helpers$1=helpers$2,ArrayLogarithmicScaleOptions=helpers$1.merge({},[commonScaleOptions,scaleService.getScaleDefaults("logarithmic")]),ArrayLogarithmicScale=scaleService.getScaleConstructor("logarithmic").extend({getRightValue:function(t){return LinearScaleBase.prototype.getRightValue.call(this,getRightValue(t,this.options.ticks))},_parseValue:function(t){return LinearScaleBase.prototype._parseValue.call(this,getRightValue(t,this.options.ticks))},determineDataLimits:function(){var e=this,r=this.options.ticks;this.minNotZero=null,commonDataLimits.call(this,function(t){t=t[r.minStats];0!==t&&(null===e.minNotZero||t<e.minNotZero)&&(e.minNotZero=t)}),this.min=helpers$1.valueOrDefault(r.min,this.min-.05*this.min),this.max=helpers$1.valueOrDefault(r.max,this.max+.05*this.max),this.min===this.max&&(0!==this.min&&null!==this.min?(this.min=Math.pow(10,Math.floor(helpers$1.log10(this.min))-1),this.max=Math.pow(10,Math.floor(helpers$1.log10(this.max))+1)):(this.min=1,this.max=10))}});function boxplotPositioner(t,o){var a=this;if(!t.length)return!1;var e=t.reduce(function(t,e){var r=_slicedToArray(t,3),i=r[0],t=r[1],r=r[2];if(e&&e.hasValue()){e=e.tooltipPosition(o,a);return[i+e.x,t+e.y,r+1]}return[i,t,r]},[0,0,0]),r=_slicedToArray(e,3),t=r[0],e=r[1],r=r[2];return{x:t/r,y:e/r}}scaleService.registerScaleType("arrayLogarithmic",ArrayLogarithmicScale,ArrayLogarithmicScaleOptions),Tooltip.positioners.boxplot=boxplotPositioner;export{ArrayLinearScale,ArrayLogarithmicScale,BoxAndWiskers as BoxAndWhiskers,BoxPlot,HorizontalBoxPlot,HorizontalViolin,Violin};